#!/bin/sh -ex
SOURCE=$1
MACHINE=$(g++ -dumpmachine)
mkdir -p .modules-FTL_core_ftl-0.3.0-$MACHINE
mkdir -p .modules-FTL_mach-$MACHINE
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/AbnfCoreSyntax.o $SOURCE/core/ftl/AbnfCoreSyntax.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/syntax.o $SOURCE/core/ftl/syntax.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/File.o $SOURCE/core/ftl/File.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/MemoryMapping.o $SOURCE/core/ftl/MemoryMapping.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/new.o $SOURCE/core/ftl/new.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/FormatSpecifier.o $SOURCE/core/ftl/FormatSpecifier.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Date.o $SOURCE/core/ftl/Date.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/SyntaxState.o $SOURCE/core/ftl/SyntaxState.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Dir.o $SOURCE/core/ftl/Dir.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/LineSource.o $SOURCE/core/ftl/LineSource.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/AbnfSyntax.o $SOURCE/core/ftl/AbnfSyntax.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/LinkInfo.o $SOURCE/core/ftl/LinkInfo.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/UriSyntax.o $SOURCE/core/ftl/UriSyntax.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/IntegerLiteral.o $SOURCE/core/ftl/IntegerLiteral.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Token.o $SOURCE/core/ftl/Token.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/ByteEncoder.o $SOURCE/core/ftl/ByteEncoder.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/User.o $SOURCE/core/ftl/User.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/BitEncoder.o $SOURCE/core/ftl/BitEncoder.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/FileStatus.o $SOURCE/core/ftl/FileStatus.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/SyntaxDebugFactory.o $SOURCE/core/ftl/SyntaxDebugFactory.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/FileLock.o $SOURCE/core/ftl/FileLock.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Condition.o $SOURCE/core/ftl/Condition.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Group.o $SOURCE/core/ftl/Group.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/SystemStream.o $SOURCE/core/ftl/SystemStream.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/SocketAddressEntry.o $SOURCE/core/ftl/SocketAddressEntry.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/SyntaxDefinition.o $SOURCE/core/ftl/SyntaxDefinition.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/SyntaxDebugger.o $SOURCE/core/ftl/SyntaxDebugger.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Buffer.o $SOURCE/core/ftl/Buffer.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Glob.o $SOURCE/core/ftl/Glob.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/ProcessFactory.o $SOURCE/core/ftl/ProcessFactory.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Pipe.o $SOURCE/core/ftl/Pipe.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/InetAddressSyntax.o $SOURCE/core/ftl/InetAddressSyntax.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/ThreadExitEvent.o $SOURCE/core/ftl/ThreadExitEvent.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Event.o $SOURCE/core/ftl/Event.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Mutex.o $SOURCE/core/ftl/Mutex.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/ByteDecoder.o $SOURCE/core/ftl/ByteDecoder.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/GlobalCoreMutex.o $SOURCE/core/ftl/GlobalCoreMutex.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/LineSink.o $SOURCE/core/ftl/LineSink.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/BitDecoder.o $SOURCE/core/ftl/BitDecoder.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/ExitEvent.o $SOURCE/core/ftl/ExitEvent.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Format.o $SOURCE/core/ftl/Format.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/SocketAddress.o $SOURCE/core/ftl/SocketAddress.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/NetworkInterface.o $SOURCE/core/ftl/NetworkInterface.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/AbnfCompiler.o $SOURCE/core/ftl/AbnfCompiler.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Wire.o $SOURCE/core/ftl/Wire.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Json.o $SOURCE/core/ftl/Json.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Md5.o $SOURCE/core/ftl/Md5.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Pattern.o $SOURCE/core/ftl/Pattern.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/ByteArray.o $SOURCE/core/ftl/ByteArray.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/String.o $SOURCE/core/ftl/String.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Exception.o $SOURCE/core/ftl/Exception.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/ProcessStatus.o $SOURCE/core/ftl/ProcessStatus.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Random.o $SOURCE/core/ftl/Random.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/FloatLiteral.o $SOURCE/core/ftl/FloatLiteral.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Time.o $SOURCE/core/ftl/Time.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/DirWalker.o $SOURCE/core/ftl/DirWalker.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Semaphore.o $SOURCE/core/ftl/Semaphore.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Base64.o $SOURCE/core/ftl/Base64.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/HuffmanCodec.o $SOURCE/core/ftl/HuffmanCodec.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Config.o $SOURCE/core/ftl/Config.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Thread.o $SOURCE/core/ftl/Thread.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/SignalSet.o $SOURCE/core/ftl/SignalSet.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Memory.o $SOURCE/core/ftl/Memory.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Process.o $SOURCE/core/ftl/Process.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/debug.o $SOURCE/core/ftl/debug.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/StreamSocket.o $SOURCE/core/ftl/StreamSocket.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/ThreadFactory.o $SOURCE/core/ftl/ThreadFactory.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/strings.o $SOURCE/core/ftl/strings.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Character.o $SOURCE/core/ftl/Character.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Crc32.o $SOURCE/core/ftl/Crc32.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Uri.o $SOURCE/core/ftl/Uri.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/Stream.o $SOURCE/core/ftl/Stream.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/StandardStreams.o $SOURCE/core/ftl/StandardStreams.cpp
g++ -std=c++0x -fpic -Wall -pthread -c -o .modules-FTL_core_ftl-0.3.0-$MACHINE/SignalManager.o $SOURCE/core/ftl/SignalManager.cpp
g++ -shared -pthread -Wl,-soname,libftlcore.so.0 -o libftlcore.so.0.3.0 .modules-FTL_core_ftl-0.3.0-$MACHINE/AbnfCoreSyntax.o .modules-FTL_core_ftl-0.3.0-$MACHINE/syntax.o .modules-FTL_core_ftl-0.3.0-$MACHINE/File.o .modules-FTL_core_ftl-0.3.0-$MACHINE/MemoryMapping.o .modules-FTL_core_ftl-0.3.0-$MACHINE/new.o .modules-FTL_core_ftl-0.3.0-$MACHINE/FormatSpecifier.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Date.o .modules-FTL_core_ftl-0.3.0-$MACHINE/SyntaxState.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Dir.o .modules-FTL_core_ftl-0.3.0-$MACHINE/LineSource.o .modules-FTL_core_ftl-0.3.0-$MACHINE/AbnfSyntax.o .modules-FTL_core_ftl-0.3.0-$MACHINE/LinkInfo.o .modules-FTL_core_ftl-0.3.0-$MACHINE/UriSyntax.o .modules-FTL_core_ftl-0.3.0-$MACHINE/IntegerLiteral.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Token.o .modules-FTL_core_ftl-0.3.0-$MACHINE/ByteEncoder.o .modules-FTL_core_ftl-0.3.0-$MACHINE/User.o .modules-FTL_core_ftl-0.3.0-$MACHINE/BitEncoder.o .modules-FTL_core_ftl-0.3.0-$MACHINE/FileStatus.o .modules-FTL_core_ftl-0.3.0-$MACHINE/SyntaxDebugFactory.o .modules-FTL_core_ftl-0.3.0-$MACHINE/FileLock.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Condition.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Group.o .modules-FTL_core_ftl-0.3.0-$MACHINE/SystemStream.o .modules-FTL_core_ftl-0.3.0-$MACHINE/SocketAddressEntry.o .modules-FTL_core_ftl-0.3.0-$MACHINE/SyntaxDefinition.o .modules-FTL_core_ftl-0.3.0-$MACHINE/SyntaxDebugger.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Buffer.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Glob.o .modules-FTL_core_ftl-0.3.0-$MACHINE/ProcessFactory.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Pipe.o .modules-FTL_core_ftl-0.3.0-$MACHINE/InetAddressSyntax.o .modules-FTL_core_ftl-0.3.0-$MACHINE/ThreadExitEvent.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Event.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Mutex.o .modules-FTL_core_ftl-0.3.0-$MACHINE/ByteDecoder.o .modules-FTL_core_ftl-0.3.0-$MACHINE/GlobalCoreMutex.o .modules-FTL_core_ftl-0.3.0-$MACHINE/LineSink.o .modules-FTL_core_ftl-0.3.0-$MACHINE/BitDecoder.o .modules-FTL_core_ftl-0.3.0-$MACHINE/ExitEvent.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Format.o .modules-FTL_core_ftl-0.3.0-$MACHINE/SocketAddress.o .modules-FTL_core_ftl-0.3.0-$MACHINE/NetworkInterface.o .modules-FTL_core_ftl-0.3.0-$MACHINE/AbnfCompiler.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Wire.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Json.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Md5.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Pattern.o .modules-FTL_core_ftl-0.3.0-$MACHINE/ByteArray.o .modules-FTL_core_ftl-0.3.0-$MACHINE/String.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Exception.o .modules-FTL_core_ftl-0.3.0-$MACHINE/ProcessStatus.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Random.o .modules-FTL_core_ftl-0.3.0-$MACHINE/FloatLiteral.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Time.o .modules-FTL_core_ftl-0.3.0-$MACHINE/DirWalker.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Semaphore.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Base64.o .modules-FTL_core_ftl-0.3.0-$MACHINE/HuffmanCodec.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Config.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Thread.o .modules-FTL_core_ftl-0.3.0-$MACHINE/SignalSet.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Memory.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Process.o .modules-FTL_core_ftl-0.3.0-$MACHINE/debug.o .modules-FTL_core_ftl-0.3.0-$MACHINE/StreamSocket.o .modules-FTL_core_ftl-0.3.0-$MACHINE/ThreadFactory.o .modules-FTL_core_ftl-0.3.0-$MACHINE/strings.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Character.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Crc32.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Uri.o .modules-FTL_core_ftl-0.3.0-$MACHINE/Stream.o .modules-FTL_core_ftl-0.3.0-$MACHINE/StandardStreams.o .modules-FTL_core_ftl-0.3.0-$MACHINE/SignalManager.o -lrt -lutil -ldl
ln -sf libftlcore.so.0.3.0 libftlcore.so.0.3
ln -sf libftlcore.so.0.3.0 libftlcore.so.0
ln -sf libftlcore.so.0.3.0 libftlcore.so
g++ -std=c++0x -Wall -pthread -I/home/frank/src/FTL/core -c -o .modules-FTL_mach-$MACHINE/GccToolChain.o $SOURCE/mach/GccToolChain.cpp
g++ -std=c++0x -Wall -pthread -I/home/frank/src/FTL/core -c -o .modules-FTL_mach-$MACHINE/DependencyCache.o $SOURCE/mach/DependencyCache.cpp
g++ -std=c++0x -Wall -pthread -I/home/frank/src/FTL/core -c -o .modules-FTL_mach-$MACHINE/BuildPlan.o $SOURCE/mach/BuildPlan.cpp
g++ -std=c++0x -Wall -pthread -I/home/frank/src/FTL/core -c -o .modules-FTL_mach-$MACHINE/mach.o $SOURCE/mach/mach.cpp
g++ -pthread -o mach .modules-FTL_mach-$MACHINE/GccToolChain.o .modules-FTL_mach-$MACHINE/DependencyCache.o .modules-FTL_mach-$MACHINE/BuildPlan.o .modules-FTL_mach-$MACHINE/mach.o -L. -lftlcore -Wl,--enable-new-dtags,-rpath=/home/frank/devel
