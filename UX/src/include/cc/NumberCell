/*
 * Copyright (C) 2022 Frank Mertens.
 *
 * Distribution and use is allowed under the terms of the zlib license
 * (see cc/LICENSE-zlib).
 *
 */

#pragma once

#include <cc/Control>

namespace cc {

/** \class NumberCell cc/NumberCell
  * \ingroup ui
  * \brief Fixed point number display and input cell
  * \see Slider
  */
class NumberCell final: public Control
{
public:
    /** Create a primordial number cell
      */
    NumberCell();

    /** Get a weak reference in \a self
      */
    NumberCell &associate(Out<NumberCell> self);

    double min() const; ///< Get minimum value
    NumberCell &min(double newValue); ///< %Set minimum value
    NumberCell &min(Definition<double> &&f); ///< Define minimum value

    double max() const; ///< Get maximum value
    NumberCell &max(double newValue); ///< %Set maximum value
    NumberCell &max(Definition<double> &&f); ///< Define maximum slider value

    double precision() const; ///< Get precision
    NumberCell &precision(double newValue); ///< %Set precision
    NumberCell &precision(Definition<double> &&f); ///< Define precision

    char decimalPoint() const; ///< Get decimal point character (defaults to '.')
    NumberCell &decimalPoint(char newValue); ///< %Set decimal point character
    NumberCell &decimalPoint(Definition<char> &&f); ///< Define decimal point character

    double value() const; ///< Get current value
    NumberCell &value(double newValue); ///< %Set current value
    NumberCell &onValueChanged(Fun<void()> &&f); ///< Get notified when value changes

private:
    friend class Object;
    friend class Slider;

    struct State;

    State &me();
    const State &me() const;

    const State *operator->() const;
};

} // namespace cc
