/*
 * Copyright (C) 2020 Frank Mertens.
 *
 * Distribution and use is allowed under the terms of the zlib license
 * (see cc/LICENSE-zlib).
 *
 */

#pragma once

namespace cc {

/** \class Registration cc/Registration
  * \ingroup plugins
  * \brief Basic idiom for library initialization
  */
template<class Asset>
class Registration
{
public:
    Registration() {
        static bool firstTime = true;
        if (firstTime) Asset{};
        firstTime = false;
    }
};

#define CC_REGISTRATION(Type) namespace { Registration<Type> registrationOf ## Type; }

} // namespace cc
